# ๐ ุฑุงูููุง ุชุณุช API - Events Management System

## ๐ ูุฑุญูู 1: ุงุญุฑุงุฒ ููุช (Login)

### 1.1 ุฏุฑุงูุช Token
**Endpoint:** `POST /api/Auth/Login`

**Request Body:**
```json
{
  "email": "admin@eventsystem.ir",
  "password": "!QAZ1qaz"
}
```

**ูุชุฌู ููุฑุฏ ุงูุชุธุงุฑ:**
- โ Status: 200 OK
- โ ุฏุฑุงูุช `accessToken` ู `refreshToken`
- โ ููุด ฺฉุงุฑุจุฑ: Admin

**ุงูุฏุงู ุจุนุฏ:** Token ุฑุง ฺฉูพ ฺฉูุฏ ู ุฏุฑ Swagger ุฑู ุฏฺฉูู "Authorize" ฺฉูฺฉ ฺฉุฑุฏู ู Token ุฑุง ุจุง ูุฑูุช `Bearer YOUR_TOKEN` ูุงุฑุฏ ฺฉูุฏ.

---

## ๐ ูุฑุญูู 2: ุจุฑุฑุณ DynamicTables (ุฏุงุฏูโูุง ูพุงู)

### 2.1 ุฏุฑุงูุช ูุณุช ฺฉุงูู
**Endpoint:** `GET /api/DynamicTables`

**ูุชุฌู ููุฑุฏ ุงูุชุธุงุฑ:**
- โ 28 ุฑฺฉูุฑุฏ
- โ 6 ฺฏุฑูู: EventStatus (5), EventSeverity (4), ImpactScope (4), TaskStatus (4), TaskPriority (4), OrganizationUnitType (4)
- โ ูุฑ ุฑฺฉูุฑุฏ Code ฺฉุชุง ุฏุงุฑุฏ (1-5)

### 2.2 ููุชุฑ ุจุฑ ุงุณุงุณ TableName
**Endpoint:** `GET /api/DynamicTables/ByTableName/EventStatus`

**ูุชุฌู ููุฑุฏ ุงูุชุธุงุฑ:**
- โ 5 ุฑฺฉูุฑุฏ ุจุง Code ูุง 1 ุชุง 5
- โ ููุงุฏุฑ: ุซุจุช ุดุฏูุ ุฏุฑ ุญุงู ุจุฑุฑุณุ ุชุงุฏ ุดุฏูุ ุฑุฏ ุดุฏูุ ุจุณุชู ุดุฏู

---

## ๐ข ูุฑุญูู 3: ุจุฑุฑุณ Master Data

### 3.1 ุงุณุชุงูโูุง (Provinces)
**Endpoint:** `GET /api/Provinces`

**ูุชุฌู ููุฑุฏ ุงูุชุธุงุฑ:**
- โ 4 ุงุณุชุงู: ุชูุฑุงูุ ุงุตููุงูุ ุฎุฑุงุณุงู ุฑุถูุ ูุงุฑุณ

### 3.2 ููุงุญ (Regions)
**Endpoint:** `GET /api/Regions`

**ูุชุฌู ููุฑุฏ ุงูุชุธุงุฑ:**
- โ 3 ูุงุญู ุฏุฑ ุชูุฑุงู: ูุงุญู 1ุ 2ุ 5

### 3.3 ูุฏุงุฑุณ (Schools)
**Endpoint:** `GET /api/Schools`

**ูุชุฌู ููุฑุฏ ุงูุชุธุงุฑ:**
- โ 2 ูุฏุฑุณู: ุฏุจุณุชุงู ุดูุฏ ุจูุดุชุ ุฏุจุฑุณุชุงู ุนูุงูู ุญู

---

## ๐ ูุฑุญูู 4: ุงุฌุงุฏ ุฑูุฏุงุฏ (Event)

### 4.1 ุณุงุฎุช ุฑูุฏุงุฏ ุฌุฏุฏ
**Endpoint:** `POST /api/Events`

**Request Body:**
```json
{
  "title": "ุชุณุช ุฑูุฏุงุฏ ุงูู",
  "description": "ุงู ฺฉ ุฑูุฏุงุฏ ุชุณุช ุงุณุช",
  "eventDate": "2026-01-08T10:00:00",
  "eventStatusId": 1,
  "severityId": 2,
  "impactScopeId": 1,
  "schoolId": 1
}
```

**ูุชุฌู ููุฑุฏ ุงูุชุธุงุฑ:**
- โ Status: 200 OK
- โ ุฏุฑุงูุช Id ุฑูุฏุงุฏ ุฌุฏุฏ
- โ ูพุงู: ุฑูุฏุงุฏ ุจุง ููููุช ุงุฌุงุฏ ุดุฏ

### 4.2 ุฏุฑุงูุช ุฑูุฏุงุฏ ุงุฌุงุฏ ุดุฏู
**Endpoint:** `GET /api/Events/{id}`

**ูุชุฌู ููุฑุฏ ุงูุชุธุงุฑ:**
- โ ุงุทูุงุนุงุช ฺฉุงูู ุฑูุฏุงุฏ
- โ CreatedBy = ุดูุงุณู ฺฉุงุฑุจุฑ admin

---

## โ ูุฑุญูู 5: ุงุฌุงุฏ ูุธูู (Task)

### 5.1 ุณุงุฎุช ูุธูู ุจุฑุง ุฑูุฏุงุฏ
**Endpoint:** `POST /api/Tasks`

**Request Body:**
```json
{
  "eventId": 1,
  "title": "ุจุฑุฑุณ ุฑูุฏุงุฏ",
  "description": "ุจุฑุฑุณ ุฏูู ุฑูุฏุงุฏ ู ุงุฑุงุฆู ฺฏุฒุงุฑุด",
  "assignedToUserId": "USER_ID_FROM_LOGIN",
  "dueDate": "2026-01-15T17:00:00",
  "priorityId": 3,
  "statusId": 1
}
```

**ูุชุฌู ููุฑุฏ ุงูุชุธุงุฑ:**
- โ Status: 200 OK
- โ ูุธูู ุจู ุฑูุฏุงุฏ ูุชุตู ุดุฏ
- โ Progress = 0

### 5.2 ุจูโุฑูุฒุฑุณุงู ูพุดุฑูุช
**Endpoint:** `PUT /api/Tasks/{id}/progress?progress=50`

**ูุชุฌู ููุฑุฏ ุงูุชุธุงุฑ:**
- โ Progress ุจู 50 ุชุบุฑ ฺฉุฑุฏ

---

## ๐ฌ ูุฑุญูู 6: ุงุฌุงุฏ ูุธุฑ (Comment)

### 6.1 ูุธุฑ ุฑู ุฑูุฏุงุฏ
**Endpoint:** `POST /api/Comments`

**Request Body:**
```json
{
  "eventId": 1,
  "content": "ุงู ุฑูุฏุงุฏ ูุงุฒ ุจู ุชูุฌู ููุฑ ุฏุงุฑุฏ",
  "parentCommentId": null
}
```

**ูุชุฌู ููุฑุฏ ุงูุชุธุงุฑ:**
- โ ูุธุฑ ุงุฌุงุฏ ุดุฏ
- โ CreatedBy = ุดูุงุณู ฺฉุงุฑุจุฑ ูุนู

### 6.2 ูพุงุณุฎ ุจู ูุธุฑ (Nested Comment)
**Endpoint:** `POST /api/Comments`

**Request Body:**
```json
{
  "eventId": 1,
  "content": "ููุงูููุ ุฏุฑ ุญุงู ุจุฑุฑุณ ูุณุชู",
  "parentCommentId": 1
}
```

**ูุชุฌู ููุฑุฏ ุงูุชุธุงุฑ:**
- โ ูพุงุณุฎ ุจู ูุธุฑ ูุจู
- โ ParentCommentId = 1

### 6.3 ุฏุฑุงูุช ูุธุฑุงุช ุฑูุฏุงุฏ
**Endpoint:** `GET /api/Comments/Event/1`

**ูุชุฌู ููุฑุฏ ุงูุชุธุงุฑ:**
- โ ูุณุช nested comments
- โ ูุธุฑุงุช ูุงูุฏ ุจุง ูุณุช Replies

---

## ๐ ูุฑุญูู 7: ุขูพููุฏ ูุงู

### 7.1 ุขูพููุฏ ูุงู ุจุฑุง ุฑูุฏุงุฏ
**Endpoint:** `POST /api/Files/Upload`

**Form Data:**
- `File`: ฺฉ ูุงู PDF ุง ุชุตูุฑ
- `EventId`: 1
- `Description`: "ูุฏุฑฺฉ ุชุณุช"

**ูุชุฌู ููุฑุฏ ุงูุชุธุงุฑ:**
- โ ูุงู ุขูพููุฏ ุดุฏ
- โ ุฐุฎุฑู ุฏุฑ `Uploads/2026/01/`
- โ ุฏุฑุงูุช Idุ FileNameุ FileSize

### 7.2 ุฏุฑุงูุช ูุงูโูุง ุฑูุฏุงุฏ
**Endpoint:** `GET /api/Files/Event/1`

**ูุชุฌู ููุฑุฏ ุงูุชุธุงุฑ:**
- โ ูุณุช ูุงูโูุง ุฑูุฏุงุฏ
- โ ุงุทูุงุนุงุช ฺฉุงูู ูุงู

---

## ๐ ูุฑุญูู 8: ุชุณุช Refresh Token

### 8.1 Refresh ฺฉุฑุฏู Token
**Endpoint:** `POST /api/Auth/Refresh`

**Request Body:**
```json
{
  "accessToken": "OLD_TOKEN",
  "refreshToken": "REFRESH_TOKEN_FROM_LOGIN"
}
```

**ูุชุฌู ููุฑุฏ ุงูุชุธุงุฑ:**
- โ ุฏุฑุงูุช Token ุฌุฏุฏ
- โ RefreshToken ุฌุฏุฏ

---

## ๐ ูุฑุญูู 9: ููุชุฑูุง ู ุฌุณุชุฌููุง

### 9.1 ููุชุฑ ุฑูุฏุงุฏูุง
**Endpoint:** `GET /api/Events/Filter`

**Query Parameters:**
- `StatusId`: 1
- `PageNumber`: 1
- `PageSize`: 10

### 9.2 ุฌุณุชุฌู ูุฏุฑุณู
**Endpoint:** `GET /api/Schools/Search?searchTerm=ุจูุดุช`

**ูุชุฌู ููุฑุฏ ุงูุชุธุงุฑ:**
- โ ุฏุจุณุชุงู ุดูุฏ ุจูุดุช

---

## โ ฺฺฉโูุณุช ููุง

- [ ] Login ูููู
- [ ] 28 DynamicTable ุจุง Code ฺฉุชุง
- [ ] 4 Province ููุฌูุฏ
- [ ] 3 Region ุฏุฑ ุชูุฑุงู
- [ ] 2 School ููุฌูุฏ
- [ ] ุงุฌุงุฏ Event ูููู
- [ ] ุงุฌุงุฏ Task ูููู
- [ ] ุจูโุฑูุฒุฑุณุงู Progress
- [ ] ุงุฌุงุฏ Comment ูููู
- [ ] ุงุฌุงุฏ Nested Comment
- [ ] ุขูพููุฏ ูุงู ูููู
- [ ] Refresh Token ฺฉุงุฑ ูโฺฉูุฏ
- [ ] ููุชุฑูุง ฺฉุงุฑ ูโฺฉููุฏ
- [ ] ุฌุณุชุฌู ฺฉุงุฑ ูโฺฉูุฏ

---

## ๐ ุฎุทุงูุง ุงุญุชูุงู

### ุฎุทุง 401 Unauthorized
- Token ุฑุง ุฏุฑ Authorize ูุงุฑุฏ ฺฉูุฏ
- ูุฑูุช: `Bearer YOUR_TOKEN`

### ุฎุทุง 400 Validation
- ุจุฑุฑุณ ฺฉูุฏ Required fields ูพุฑ ุดุฏู ุจุงุดูุฏ
- ุชุงุฑุฎโูุง ุจุงุฏ ูุฑูุช ISO 8601 ุฏุงุดุชู ุจุงุดูุฏ

### ุฎุทุง 404 Not Found
- ID ูุง ุตุญุญ ุฑุง ูุงุฑุฏ ฺฉูุฏ
- EventId, TaskId ุจุงุฏ ุงุฒ ูุจู ูุฌูุฏ ุฏุงุดุชู ุจุงุดูุฏ

---

## ๐ ูฺฉุงุช ููู

1. **ููุดู ุงุจุชุฏุง Login ฺฉูุฏ** ู Token ุฑุง ุฏุฑุงูุช ฺฉูุฏ
2. **Token ุฑุง Authorize ฺฉูุฏ** ูุจู ุงุฒ ุชุณุช endpoint ูุง ุฏฺฏุฑ
3. **ID ูุง foreign key** ุจุงุฏ ุงุฒ ูุจู ุฏุฑ ุฏุชุงุจุณ ูุฌูุฏ ุฏุงุดุชู ุจุงุดูุฏ
4. **ูุงูโูุง ุขูพููุฏ ุดุฏู** ุฏุฑ `EventsManagement.API/Uploads/` ุฐุฎุฑู ูโุดููุฏ
5. **ูุงฺฏโูุง** ุฏุฑ `EventsManagement.API/logs/` ูุงุจู ูุดุงูุฏู ูุณุชูุฏ

---

## ๐ฏ ูุชุฌูโฺฏุฑ

ุงฺฏุฑ ุชูุงู ุชุณุชโูุง ูููู ุจูุฏูุฏ:
- โ Backend ฺฉุงูู ฺฉุงุฑ ูโฺฉูุฏ
- โ DataSeeder ุตุญุญ ุงุฌุฑุง ุดุฏู
- โ Authentication ู Authorization ูุนุงู ุงุณุช
- โ CQRS Pattern ุนููุงุช ุงุณุช
- โ File Upload ฺฉุงุฑ ูโฺฉูุฏ
- โ ุขูุงุฏู ุจุฑุง ูุฑุญูู Blazor UI
